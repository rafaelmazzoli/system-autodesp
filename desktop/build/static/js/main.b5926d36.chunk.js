(this.webpackJsonpdesktop=this.webpackJsonpdesktop||[]).push([[0],{46:function(e,a,t){e.exports=t(80)},51:function(e,a,t){},80:function(e,a,t){"use strict";t.r(a);var n=t(0),r=t.n(n),l=t(16),c=t.n(l),o=(t(51),t(11)),s=t(10);t(52),t(55),t(56);function i(){return r.a.createElement("nav",{id:"navBar-container",className:"navbar navbar-expand-lg navbar-dark bg-dark"},r.a.createElement(o.b,{className:"navbar-brand h1 mb-0",to:"/lista/veiculos"},"Autodesp"),r.a.createElement("button",{className:"navbar-toggler",type:"button","data-toggle":"collapse","data-target":"#navbarNavAltMarkup","aria-controls":"navbarNavAltMarkup","aria-expanded":"false","aria-label":"Toggle navigation"},r.a.createElement("span",{className:"navbar-toggler-icon"})),r.a.createElement("div",{className:"collapse navbar-collapse",id:"navbarNavAltMarkup"},r.a.createElement("div",{className:"navbar-nav"},r.a.createElement(o.c,{className:"nav-item nav-link",to:"/cliente/novo"},"Cadastrar Cliente"),r.a.createElement(o.c,{className:"nav-item nav-link",to:"/lista/veiculos"},"Lista de Ve\xedculos"),r.a.createElement(o.c,{className:"nav-item nav-link",to:"/lista/clientes"},"Lista de Clientes"))))}var u=t(7);function m(){return r.a.createElement("div",{className:"container h1 h-75"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("div",{className:"col-sm-3 text-center"},r.a.createElement("span",{className:"badge badge-danger mb-3"},"404"),r.a.createElement("p",{className:"h5"},"A p\xe1gina que est\xe1 tentando acessar n\xe3o foi encontrada!"))))}var d=t(6),p=t(45),v=t(1),f=t.n(v),h=t(3),b=t(5),E=t(27),g=t(29),N=function(e){var a=e.sortColumn,t=e.columns,n=e.onSort;return r.a.createElement("thead",null,r.a.createElement("tr",null,t.map((function(e){return void 0===e.visible||e.visible?r.a.createElement("th",{className:"string"===typeof e.label?"font-weight-bold pl-0":"font-weight-bold pl-0 text-right",scope:"col",style:{cursor:"pointer"},onClick:function(){return e.label&&"string"===typeof e.label&&(t=e.path,a.path===t?a.order="asc"===a.order?"desc":"asc":(a.path=t,a.order="asc"),void n(a));var t},key:e.path||e.key},e.label,"\xa0","string"===typeof e.label&&function(e){var t=a.path,n=a.order;return e.path!==t?null:"asc"===n?r.a.createElement(E.a,{icon:g.b}):r.a.createElement(E.a,{icon:g.a})}(e)):null}))))},_=t(18),C=t.n(_),k=t(4),y=t.n(k);function O(e){var a=e.data,t=e.columns,n=e.onDoubleClickTr;function l(e,a){return a.content?a.content(e):y.a.get(e,a.path)}function c(e,a){return e.id+(a.path||a.key)}return r.a.createElement("tbody",null,a.map((function(e){return r.a.createElement("tr",{key:C()(),onDoubleClick:function(a){n({e:a,item:e})}},t.map((function(a,t){return void 0===a.visible||a.visible?0!==t?r.a.createElement("td",{className:"p-1 align-middle",key:c(e,a)},l(e,a)):r.a.createElement("th",{scope:"row",className:"p-1 align-middle font-weight-normal",key:c(e,a)},l(e,a)):null})))})))}var j=function(e){var a=e.columns,t=e.sortColumn,n=e.onSort,l=e.data,c=e.onDoubleClickTr;return r.a.createElement("table",{className:"table table-hover"},r.a.createElement(N,{columns:a,sortColumn:t,onSort:n}),r.a.createElement(O,{data:l,columns:a,onDoubleClickTr:c}))};function x(e,a,t){var n=(a-1)*t;return y()(e).slice(n).take(t).value()}function w(e){var a=e.value,t=e.onChange,n=e.placeholder;return r.a.createElement("input",{id:"searchBox",className:"form-control",type:"search",name:"query",placeholder:n,"aria-label":"Search",value:a,onChange:function(e){return t(e.currentTarget.value)}})}function S(e){var a=e.itemsCount,t=e.pageSize,n=e.onPageChange,l=e.currentPage,c=Math.ceil(a/t);if(1===c)return null;var o=y.a.range(1,c+1);return r.a.createElement("nav",null,r.a.createElement("ul",{className:"pagination"},o.map((function(e){return r.a.createElement("li",{key:e,className:e===l?"page-item active":"page-item"},r.a.createElement("button",{onClick:function(){return n(e)},className:"page-link"},e))}))))}var V=t(42),F=t.n(V).a.create({baseURL:"http://localhost:3333/API"});F.interceptors.response.use(null,(function(e){return e.response&&e.response.status>=400&&e.response.status<500?403===e.response.status||401===e.response.status?s.b.warn("Usu\xe1rio sem Permiss\xe3o"):s.b.error("".concat(e.response.status,": ").concat(y.a.isString(e.response.data)?e.response.data:"Erro no Webservice")):s.b.error("Algum erro inexperado ocorreu."),Promise.reject(e)}));var P={getCustomerByID:function(){var e=Object(h.a)(f.a.mark((function e(a){var t,n,r,l=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=l.length>1&&void 0!==l[1]?l[1]:void 0)&&(t=JSON.stringify(t)),e.next=4,F.get("/customer/".concat(a),{params:t});case 4:return n=e.sent,r=n.data,e.abrupt("return",r);case 7:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),getAllCustomers:function(){var e=Object(h.a)(f.a.mark((function e(){var a,t,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:void 0)&&(a=JSON.stringify(a)),e.next=4,F.get("/customers",{params:a});case 4:return t=e.sent,n=t.data,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),getAllVehicles:function(){var e=Object(h.a)(f.a.mark((function e(){var a,t,n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(a=r.length>0&&void 0!==r[0]?r[0]:void 0)&&(a=JSON.stringify(a)),e.next=4,F.get("/vehicles",{params:a});case 4:return t=e.sent,n=t.data,e.abrupt("return",n);case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),saveCustomer:function(){var e=Object(h.a)(f.a.mark((function e(a){var t,n,r,l,c,o,s,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=i.length>1&&void 0!==i[1]?i[1]:void 0)&&(t=JSON.stringify(t)),!a._id){e.next=10;break}return delete(n=Object(d.a)({},a))._id,e.next=7,F.put("/customer/".concat(a._id),n,{params:t});case 7:return r=e.sent,l=r.data,e.abrupt("return",l);case 10:return delete(c=Object(d.a)({},a))._id,e.next=14,F.post("/customer",c,{params:t});case 14:return o=e.sent,s=o.data,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),saveVehicle:function(){var e=Object(h.a)(f.a.mark((function e(a){var t,n,r,l,c,o,s,i=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=i.length>1&&void 0!==i[1]?i[1]:void 0)&&(t=JSON.stringify(t)),!a._id){e.next=10;break}return delete(n=Object(d.a)({},a))._id,e.next=7,F.put("/vehicle/".concat(a._id),n,{params:t});case 7:return r=e.sent,l=r.data,e.abrupt("return",l);case 10:return delete(c=Object(d.a)({},a))._id,e.next=14,F.post("/vehicle",c);case 14:return o=e.sent,s=o.data,e.abrupt("return",s);case 17:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),removeVehicle:function(){var e=Object(h.a)(f.a.mark((function e(a){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:void 0)&&(t=JSON.stringify(t)),e.next=4,F.delete("/vehicle/".concat(a),{params:t});case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),removeCustomer:function(){var e=Object(h.a)(f.a.mark((function e(a){var t,n=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(t=n.length>1&&void 0!==n[1]?n[1]:void 0)&&(t=JSON.stringify(t)),e.next=4,F.delete("/customer/".concat(a),{params:t});case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),checkVehicleAdvised:function(){var e=Object(h.a)(f.a.mark((function e(a,t){var n,r=arguments;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return(n=r.length>2&&void 0!==r[2]?r[2]:void 0)&&(n=JSON.stringify(n)),e.next=4,F.post("/vehicle/".concat(a,"/check/").concat(t),{params:n});case 4:return e.abrupt("return",!0);case 5:case"end":return e.stop()}}),e)})));return function(a,t){return e.apply(this,arguments)}}()};function M(){return r.a.createElement("div",{className:"container h-75"},r.a.createElement("div",{className:"row align-items-center justify-content-center h-100"},r.a.createElement("span",{className:"spinner-border text-primary mr-3",role:"status","aria-hidden":"true"}),r.a.createElement("strong",null,"Carregando...")))}function R(e){var a=e.onRadioFilterChange;return r.a.createElement("div",{className:"col-sm-2 align-self-start text-center border-right p-3 rounded-lg bg-light",onChange:a},r.a.createElement("h5",null,r.a.createElement("i",{className:"fas fa-car"}),"\xa0Final de Placa"),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_all",className:"form-check-input",type:"radio",name:"final_license_plate",value:"",defaultChecked:!0}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_all"},"Todos")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_1",className:"form-check-input",type:"radio",name:"final_license_plate",value:"1$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_1"},"1")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_2",className:"form-check-input",type:"radio",name:"final_license_plate",value:"2$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_2"},"2")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_3",className:"form-check-input",type:"radio",name:"final_license_plate",value:"3$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_3"},"3")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_4",className:"form-check-input",type:"radio",name:"final_license_plate",value:"4$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_4"},"4")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_5",className:"form-check-input",type:"radio",name:"final_license_plate",value:"5$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_5"},"5")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_6",className:"form-check-input",type:"radio",name:"final_license_plate",value:"6$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_6"},"6")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_7",className:"form-check-input",type:"radio",name:"final_license_plate",value:"7$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_7"},"7")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_8",className:"form-check-input",type:"radio",name:"final_license_plate",value:"8$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_8"},"8")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_9",className:"form-check-input",type:"radio",name:"final_license_plate",value:"9$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_9"},"9")),r.a.createElement("div",{className:"form-check"},r.a.createElement("input",{id:"final_license_plate_0",className:"form-check-input",type:"radio",name:"final_license_plate",value:"0$"}),r.a.createElement("label",{className:"form-check-label px-2",htmlFor:"final_license_plate_0"},"0")))}var L=t(19),A=t.n(L);function z(e){var a=e.history,t=Object(n.useState)(!1),l=Object(b.a)(t,2),c=l[0],i=l[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),v=m[0],E=m[1],g=Object(n.useState)({path:"owner.name",order:"asc"}),N=Object(b.a)(g,2),_=N[0],C=N[1],k=Object(n.useState)(""),O=Object(b.a)(k,2),V=O[0],F=O[1],L=Object(n.useState)(1),z=Object(b.a)(L,2),I=z[0],T=z[1],D=Object(n.useState)({license_plate:""}),J=Object(b.a)(D,2),$=J[0],q=J[1],B={columns:[{path:"owner.name",label:"Nome"},{path:"owner.phone1",label:"Telefone 1"},{path:"license_plate",label:"Placa"},{path:"brand",label:"Marca"},{path:"model",label:"Modelo"},{path:"renavam",label:"Renavam"},{path:"holder",label:"Proprietario"},{key:"advised",label:r.a.createElement(r.a.Fragment,null,"Avisado no M\xeas"),content:function(e){return r.a.createElement("div",{className:"align-middle text-center"},r.a.createElement("input",{type:"checkbox",onChange:Z(e),checked:!!(e.advised&&A()().diff(A()(e.advised),"days")<=31)}))}},{key:"controls",label:r.a.createElement(o.b,{to:"/cliente/novo"},r.a.createElement("button",{className:"btn btn-success btn-sm"},"Novo\xa0",r.a.createElement("i",{className:"fas fa-plus"}))),content:function(e){return r.a.createElement("div",{className:"text-right"},r.a.createElement("button",{onClick:Object(h.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(window.confirm("Voc\xea deseja realmente apagar o ve\xedculo ".concat(e.license_plate?e.license_plate:"","?"))){a.next=2;break}return a.abrupt("return");case 2:if(t=v.filter((function(a){return a._id!==e._id})),E(t),!e._id){a.next=7;break}return a.next=7,P.removeVehicle(e._id);case 7:s.b.success("Ve\xedculo ".concat(e.license_plate?e.license_plate:""," foi apagado!"));case 8:case"end":return a.stop()}}),a)}))),className:"btn btn-danger btn-sm m-1"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement(o.b,{to:"/cliente/".concat(e.owner._id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},r.a.createElement("i",{className:"far fa-eye"}))))}}],pageSize:10};Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Y($);case 2:i(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[$]);var Y=function(){var e=Object(h.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAllVehicles({filter:a});case 2:t=e.sent,E(t);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),Z=function(e){return function(){var a=Object(h.a)(f.a.mark((function a(t){return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return v.forEach((function(a){e._id===a._id&&(a.advised=t.target.checked?A()():void 0)})),E(Object(p.a)(v)),a.next=4,P.checkVehicleAdvised(e._id,t.target.checked);case 4:case"end":return a.stop()}}),a)})));return function(e){return a.apply(this,arguments)}}()},W=function(){var e=Object(h.a)(f.a.mark((function e(a){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:t={license_plate:a.target.value},q(t);case 2:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}(),U=function(){var e=B.pageSize,a=v;V&&(a=v.filter((function(e){return y.a.toString(y.a.get(e,_.path)).toLowerCase().includes(V.toLowerCase())})));var t=x(y.a.orderBy(a,[_.path],[_.order]),I,e);return{totalCount:a.length,data:t}}(),G=U.totalCount,H=U.data;return c?r.a.createElement("div",{className:"container-fluid p-5"},r.a.createElement("div",{className:"row"},r.a.createElement(R,{onRadioFilterChange:W}),r.a.createElement("div",{className:"col-10"},r.a.createElement(w,{value:V,onChange:function(e){F(e)},placeholder:function(){var e=B.columns.filter((function(e){return _.path===e.path?e:null}));return"Filtrar por ".concat(e[0].label,"...")}()}),r.a.createElement("div",{className:"pt-1 px-1"},r.a.createElement(j,{columns:B.columns,sortColumn:_,onSort:function(e){C(Object(d.a)({},e))},data:H,onDoubleClickTr:function(e){var t=e.item;a.push("/cliente/".concat(t.owner._id))}})),r.a.createElement("div",{className:"d-flex justify-content-center"},r.a.createElement(S,{itemsCount:G,pageSize:B.pageSize,currentPage:I,onPageChange:function(e){T(e)}}))))):r.a.createElement(M,null)}function I(e){var a=e.history,t=Object(n.useState)(!1),l=Object(b.a)(t,2),c=l[0],i=l[1],u=Object(n.useState)([]),m=Object(b.a)(u,2),p=m[0],v=m[1],E=Object(n.useState)({path:"name",order:"asc"}),g=Object(b.a)(E,2),N=g[0],_=g[1],C=Object(n.useState)(""),k=Object(b.a)(C,2),O=k[0],V=k[1],F=Object(n.useState)(1),R=Object(b.a)(F,2),L=R[0],A=R[1],z={columns:[{path:"name",label:"Nome"},{path:"cpf_cnpj",label:"CPF/CNPJ"},{path:"phone1",label:"Telefone 1"},{path:"email",label:"E-mail"},{key:"controls",label:r.a.createElement(o.b,{to:"/cliente/novo"},r.a.createElement("button",{className:"btn btn-success btn-sm"},"Novo\xa0",r.a.createElement("i",{className:"fas fa-plus"}))),content:function(e){return r.a.createElement("div",{className:"container text-right"},r.a.createElement("button",{onClick:Object(h.a)(f.a.mark((function a(){var t;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(window.confirm("Voc\xea deseja realmente apagar a pessoa ".concat(e.name?e.name:"","?"))){a.next=2;break}return a.abrupt("return");case 2:if(t=p.filter((function(a){return a._id!==e._id})),v(t),!e._id){a.next=7;break}return a.next=7,P.removeCustomer(e._id);case 7:s.b.success("Pessoa ".concat(e.name?e.name:""," foi apagada!"));case 8:case"end":return a.stop()}}),a)}))),className:"btn btn-danger btn-sm m-1"},r.a.createElement("i",{className:"fas fa-times"})),r.a.createElement(o.b,{to:"/cliente/".concat(e._id)},r.a.createElement("button",{className:"btn btn-primary btn-sm"},r.a.createElement("i",{className:"far fa-eye"}))))}}],pageSize:10};Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,I();case 2:i(!0);case 3:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[]);var I=function(){var e=Object(h.a)(f.a.mark((function e(){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,P.getAllCustomers();case 2:a=e.sent,v(a);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),T=function(){var e=z.pageSize,a=p;O&&(a=p.filter((function(e){return y.a.toString(y.a.get(e,N.path)).toLowerCase().includes(O.toLowerCase())})));var t=x(y.a.orderBy(a,[N.path],[N.order]),L,e);return{totalCount:a.length,data:t}}(),D=T.totalCount,J=T.data;return c?r.a.createElement("div",{className:"container h-75 mt-5"},r.a.createElement(w,{value:O,onChange:function(e){V(e)},placeholder:function(){var e=z.columns.filter((function(e){return N.path===e.path?e:null}));return"Filtrar por ".concat(e[0].label,"...")}()}),r.a.createElement("div",{className:"mt-1"},r.a.createElement(j,{columns:z.columns,sortColumn:N,onSort:function(e){_(Object(d.a)({},e))},data:J,onDoubleClickTr:function(e){var t=e.item;a.push("/cliente/".concat(t._id))}})),r.a.createElement(S,{itemsCount:D,pageSize:z.pageSize,currentPage:L,onPageChange:function(e){A(e)}})):r.a.createElement(M,null)}function T(e){var a=e.name,t=e.formControls,n=e.onChange,l=t[a],c=l.label,o=l.error,s=l.showLabel,i=l.validateClass,u=l.valid,m=l.touched,d=l.className,p=l.value,v=l.type,f=l.placeholder,h=l.autoFocus,b=l.readOnly,E=l.autoComplete,g=l.showError;return r.a.createElement("div",{className:"form-group",id:a},s&&r.a.createElement("label",{htmlFor:a},c),r.a.createElement("input",{autoComplete:E,value:p||"",type:v,placeholder:f,autoFocus:h,readOnly:b,onChange:n,name:a,className:i&&m?"".concat(d," ").concat(u?"is-valid":"is-invalid"):d}),g&&o&&m&&(i?r.a.createElement("small",{className:"text-danger"},o):r.a.createElement("div",{className:"badge badge-pill badge-danger"},o)))}function D(e,a,t){for(var n in t){if(!J[n])throw new Error("A regra da valida\xe7\xe3o '".concat(n,"' \xe9 inv\xe1lida. S\xe3o aceitos apenas os valores: ").concat(Object.keys(J).join(", ")));var r=J[n]({label:a,value:e,ruleValue:t[n]});if(!r.isValid)return{valid:r.isValid,error:r.invalidMessage}}return{valid:!0,error:""}}var J={minLength:function(e){var a=e.label,t=e.value,n=e.ruleValue;return{isValid:t&&t.length>=n,invalidMessage:"".concat(a," tem no m\xednimo ").concat(n," caracteres!")}},maxLength:function(e){var a=e.label,t=e.value,n=e.ruleValue;return{isValid:t&&t.length<=n,invalidMessage:"".concat(a," tem no m\xe1ximo ").concat(n," caracteres!")}},isRequired:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:t&&""!==t.trim(),invalidMessage:"".concat(a," \xe9 um campo Requerido!")}},isEmail:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/^(([^<>()[\]\\.,;:\s@"]+(\.[^<>()[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z-0-9]+\.)+[a-zA-Z]{2,}))$/.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o \xe9 v\xe1lido!")}},isCpf:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/\d{3}\.\d{3}\.\d{3}-\d{2}/.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o v\xe1lido!")}},isCnpj:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2}/.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o \xe9 v\xe1lido!")}},isCpfOrCnpj:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/(\d{3}\.\d{3}\.\d{3}-\d{2})|(\d{2}\.\d{3}\.\d{3}\/\d{4}-\d{2})/.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o \xe9 v\xe1lido!")}},isPhone:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/\(\d{2}\) \d{4,5}-\d{4}/.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o \xe9 v\xe1lido!")}},isLicensePlate:function(e){var a=e.label,t=e.value;e.ruleValue;return{isValid:!t||t&&/[a-z]{3}-\d[a-z0-9]\d{2}/i.test(String(t).toLowerCase()),invalidMessage:"".concat(a," n\xe3o \xe9 v\xe1lido!")}}},$=t(43),q=t(44),B=t.n(q);function Y(e,a,t){var r=Object(n.useState)(!1),l=Object(b.a)(r,2),c=l[0],o=l[1],s=Object(n.useState)(!0),i=Object(b.a)(s,2),u=i[0],m=i[1],p=Object(n.useState)(Z(e)),v=Object(b.a)(p,2),E=v[0],g=v[1],N=function(e){g(Z(e))},_=function(){var e=Object(h.a)(f.a.mark((function e(t){var n,r,l;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t&&t.preventDefault(),n={default:function(){o(!1)},error:function(){Object.keys(E).forEach((function(e){E[e].valid=!1})),o(!1),N(E)},done:function(){}},r=!0,Object.keys(E).forEach((function(e){r=E[e].valid&&r})),m(r),u||!r){e.next=7;break}return e.abrupt("return");case 7:return o(!0),e.next=10,a();case 10:l=e.sent,n[l||"default"]&&n[l||"default"]();case 12:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}();return{formControls:E,formIsSubmitting:c,formIsValid:u,handleSubmit:_,handleChange:function(e){e.persist();var a=e.target.name,n=E[a],r={checkbox:function(){return e.target.checked},autocomplete:function(){return e.target.value},default:function(){return e.target.value}};n.value=r[e.target.type]?r[e.target.type]():r.default(),n.currentMask=H(n.value,n.mask),n.value=G(n.value,n.currentMask);var l=D(n.value,n.label,n.validationRules),c=l.valid,o=l.error;n.valid=c,n.error=o,E[a]=Object(d.a)(Object(d.a)({},n),{},{touched:!0});var s=!0;Object.keys(E).forEach((function(e){s=E[e].valid&&s})),E[a].value="date"===E[a].type&&E[a].value?W(E[a].value,"YYYY-MM-DD",E[a].dateIOFormat):n.value;var i=U(E[a].value,E[a].formatValue);t&&t(a,n.valuePath,i),m(s),N(Object(d.a)({},E))},reloadFormValues:function(e){var a=Object(d.a)({},E);Object.keys(a).forEach((function(t){a[t].value=y.a.get(e,a[t].valuePath,"")})),N(a)},setFormControls:N}}function Z(e){var a={};Object.keys(e).forEach((function(t){a[t]=Object(d.a)(Object(d.a)({},function(e){var a={text:{formatValue:"",valuePath:"",value:"",label:"",mask:"",dateIOFormat:"",showLabel:!0,type:"text",placeholder:"",autoFocus:!1,validateClass:!1,valid:!1,validationRules:{},className:"form-control",error:"",showError:!0,touched:!1,readOnly:!1,autoComplete:"off"},select:{formatValue:"",valuePath:"",value:"",label:"",showLabel:!0,type:"select",autoFocus:!1,valid:!1,validationRules:{},className:"form-control",error:"",showError:!0,touched:!1,valueSelector:"value",labelSelector:"label",options:[{value:1,label:"Exemplo 1"},{value:2,label:"Exemplo 2"}]},"select-one":{formatValue:"",valuePath:"",value:"",label:"",showLabel:!0,type:"text",autoFocus:!1,valid:!1,validationRules:{},className:"form-control",error:"",showError:!0,touched:!1,options:[{value:"",displayValue:""},{value:"",displayValue:""}]},checkbox:{formatValue:"boolean",valuePath:"",value:"",label:"",showLabel:!0,autoFocus:!1,validateClass:!1,valid:!1,validationRules:{},className:"form-check-input",error:"",showError:!0,touched:!1,readOnly:!1},textArea:{formatValue:"",valuePath:"",value:"",label:"",mask:"",showLabel:!0,type:"textArea",placeholder:"",autoFocus:!1,validateClass:!1,valid:!1,validationRules:{},className:"form-control",error:"",rows:4,showError:!0,touched:!1,readOnly:!1}};return a[e]||a.text}(e[t].type)),e[t]),a[t].currentMask=H(a[t].value?a[t].value:"",a[t].mask),a[t].value=G(a[t].value,a[t].currentMask),"date"===a[t].type&&a[t].value&&(a[t].value=W(a[t].value,a[t].dateIOFormat,"YYYY-MM-DD"));var n=D(a[t].value,a[t].label,a[t].validationRules),r=n.valid,l=n.error;a[t].valid=r,a[t].error=l,a[t].value=U(a[t].value,a[t].formatValue)}));var t=!0;return Object.keys(a).forEach((function(e){t=a[e].valid&&t})),a}function W(e,a,t){return A()(e,a||void 0).format(t||void 0)}function U(e,a){return{int:+e,string:"".concat(e),boolean:!(!e||"false"===e)}[a]||e}function G(e,a){return e&&e.toString()&&a&&("function"===typeof a||"object"===typeof a)?Object($.conformToMask)(e.toString(),a,{guide:!1,previousConformedValue:e.toString()}).conformedValue:e}function H(e,a){var t={cpf:[/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"-",/\d/,/\d/],cnpj:[/\d/,/\d/,".",/\d/,/\d/,/\d/,".",/\d/,/\d/,/\d/,"/",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/],cellphone:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],phone:["(",/\d/,/\d/,")"," ",/\d/,/\d/,/\d/,/\d/,"-",/\d/,/\d/,/\d/,/\d/],license_plate:[/[A-Za-z]/,/[A-Za-z]/,/[A-Za-z]/,"-",/\d/,/[A-Za-z0-9]/,/\d/,/\d/],money:B()({prefix:"R$ ",allowDecimal:!0,allowNegative:!0}),date:[/[0-3]/,/\d/,"/",/[0-1]/,/\d/,"/",/[1-2]/,/\d/,/\d/,/\d/]},n=a;if(y.a.isPlainObject(a)){var r=y.a.sortBy(Object.keys(a));n=a[r.find((function(a,t){return!(e.length>a&&r[t+1])}))]}return t[n]?t[n]:n}function K(e){var a=e.normalText,t=e.loadingText,n=e.normalIcon,l=e.disabledWhen,c=e.isLoading,o=e.buttonClass;return r.a.createElement("button",{type:"submit",className:o||"btn btn-primary mb-3",disabled:l||c},c?r.a.createElement(r.a.Fragment,null,t||"Salvando",r.a.createElement("span",{className:"spinner-border spinner-border-sm ml-2",role:"status","aria-hidden":"true"})):r.a.createElement(r.a.Fragment,null,a||"Salvar","\xa0\xa0",r.a.createElement("i",{className:n||"fas fa-angle-double-right"})))}function Q(e){var a=e.name,t=e.formControls,n=e.onChange,l=t[a],c=l.label,o=l.error,s=l.showLabel,i=l.validateClass,u=l.valid,m=l.touched,d=l.className,p=l.value,v=l.placeholder,f=l.autoFocus,h=l.readOnly,b=l.showError,E=l.rows;return r.a.createElement("div",{className:"form-group",id:a},s&&r.a.createElement("label",{htmlFor:a},c),r.a.createElement("textarea",{value:p||"",placeholder:v,autoFocus:f,readOnly:h,onChange:n,name:a,rows:E||4,className:i&&m?"".concat(d," ").concat(u?"is-valid":"is-invalid"):d}),b&&o&&m&&(i?r.a.createElement("small",{className:"text-danger"},o):r.a.createElement("div",{className:"badge badge-pill badge-danger"},o)))}function X(e){var a=e.customer,t=e.setCustomer,l=e.doSubmit,c=Object(n.useState)(!1),o=Object(b.a)(c,2),s=o[0],i=o[1],u=Y({name:{valuePath:"name",value:a.name,label:"Nome",type:"text",validationRules:{isRequired:!0,maxLength:35}},cpf_cnpj:{valuePath:"cpf_cnpj",value:a.cpf_cnpj,label:"CPF/CNPJ",type:"text",mask:{18:"cnpj",14:"cpf"},validationRules:{isRequired:!0,isCpfOrCnpj:!0}},phone1:{valuePath:"phone1",value:a.phone1,label:"Telefone 1",type:"text",mask:{14:"phone",15:"cellphone"},validationRules:{isRequired:!0,isPhone:!0}},phone2:{valuePath:"phone2",value:a.phone2,label:"Telefone 2",type:"text",mask:{14:"phone",15:"cellphone"},validationRules:{isPhone:!0}},email:{valuePath:"email",value:a.email,label:"E-mail",type:"text",validationRules:{isEmail:!0}},notes:{valuePath:"notes",value:a.notes,label:"Observa\xe7\xf5es",type:"textArea",validationRules:{}},id:{valuePath:"_id",value:a._id,label:"Id Cliente",type:"text",readOnly:!0,validationRules:{}}},l,(function(e,n,r){var l=Object.assign({},a);y.a.set(l,n,r),t(l)}));return Object(n.useEffect)((function(){u.reloadFormValues(a),i(!0)}),[a]),s?r.a.createElement("form",{onSubmit:u.handleSubmit},r.a.createElement("div",{className:"container p-3 rounded-lg bg-light"},r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col h3 p-0"},r.a.createElement("i",{className:"fas fa-user"}),"\xa0Cliente"),r.a.createElement("div",{className:"col-sm-auto text-center"},r.a.createElement(K,{disabledWhen:!u.formIsValid,isLoading:u.formIsSubmitting}))),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"id",onChange:u.handleChange,formControls:u.formControls})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"cpf_cnpj",onChange:u.handleChange,formControls:u.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"name",onChange:u.handleChange,formControls:u.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"email",onChange:u.handleChange,formControls:u.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"phone1",onChange:u.handleChange,formControls:u.formControls})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"phone2",onChange:u.handleChange,formControls:u.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col"},r.a.createElement(Q,{name:"notes",onChange:u.handleChange,formControls:u.formControls}))))):r.a.createElement(M,null)}function ee(e){var a=e.customer,t=e.setCustomer,l=e.doSubmit,c=Object(n.useState)(null),o=Object(b.a)(c,2),i=o[0],u=o[1],m=Object(n.useState)(!1),p=Object(b.a)(m,2),v=p[0],E=p[1],g=Object(n.useState)({path:"license_plate",order:"asc"}),N=Object(b.a)(g,2),_=N[0],k=N[1],O={columns:[{path:"license_plate",label:"Placa"},{path:"model",label:"Modelo"},{key:"controls",label:r.a.createElement("button",{onClick:function(){w()},className:"btn btn-success btn-sm"},"Novo\xa0",r.a.createElement("i",{className:"fas fa-plus"})),content:function(e){return r.a.createElement("div",{className:"container text-right"},r.a.createElement("button",{className:"btn btn-primary btn-sm",onClick:function(){var t=a.vehicles.findIndex((function(a){return e._key===a._key}));u(t),x.reloadFormValues(a.vehicles[t])}},r.a.createElement("i",{className:"far fa-eye"})),r.a.createElement("button",{onClick:Object(h.a)(f.a.mark((function n(){return f.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(window.confirm("Voc\xea deseja realmente apagar o ve\xedculo ".concat(e.license_plate?e.license_plate:"","?"))){n.next=2;break}return n.abrupt("return");case 2:if(a.vehicles=a.vehicles.filter((function(a){return a._key!==e._key})),t(Object(d.a)({},a)),a.vehicles.length>0?(u(0),x.reloadFormValues(a.vehicles[0])):(u(null),x.reloadFormValues({})),!e._id){n.next=8;break}return n.next=8,P.removeVehicle(e._id);case 8:s.b.success("Ve\xedculo ".concat(e.license_plate?e.license_plate:""," foi apagado!"));case 9:case"end":return n.stop()}}),n)}))),className:"btn btn-danger btn-sm m-1"},r.a.createElement("i",{className:"fas fa-times"})))}}]},x=Y({license_plate:{valuePath:"license_plate",label:"Placa",mask:"license_plate",validationRules:{isRequired:!0,isLicensePlate:!0}},brand:{valuePath:"brand",label:"Marca"},model:{valuePath:"model",label:"Modelo",validationRules:{isRequired:!0}},renavam:{valuePath:"renavam",label:"Renavam"},holder:{valuePath:"holder",label:"Propriet\xe1rio"},id:{valuePath:"_id",label:"Id Ve\xedculo",readOnly:!0}},l,(function(e,n,r){var l=Object.assign({},a);y.a.set(l.vehicles[i],n,r),y.a.set(l.vehicles[i],"_isValid",x.formIsValid),t(l)}));Object(n.useEffect)((function(){a.vehicles.length>0&&null===i?(u(0),x.reloadFormValues(a.vehicles[0])):null!==i&&x.reloadFormValues(a.vehicles[i]),E(!0)}),[a.vehicles]);var w=function(){var e=a.vehicles.findIndex((function(e){return!e.license_plate}));if(e<0){a.vehicles.push({_isValid:!1,_key:C()()}),t(Object(d.a)({},a));var n=a.vehicles.length-1;u(n),x.reloadFormValues(a.vehicles[n])}else u(e),x.reloadFormValues(a.vehicles[e])};return v?a.vehicles.length>0?r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm "},r.a.createElement(j,{columns:O.columns,sortColumn:_,onSort:function(e){k(Object(d.a)({},e))},data:y.a.orderBy(a.vehicles,[_.path],[_.order])}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement("form",{onSubmit:function(){}},r.a.createElement("div",{className:"p-3 rounded-lg bg-light"},r.a.createElement("div",{className:"row m-1"},r.a.createElement("div",{className:"col h3 p-0"},r.a.createElement("i",{className:"fas fa-car"}),"\xa0Ve\xedculo")),r.a.createElement("div",{className:"row mt-3"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"id",onChange:x.handleChange,formControls:x.formControls})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"license_plate",onChange:x.handleChange,formControls:x.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"brand",onChange:x.handleChange,formControls:x.formControls})),r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"model",onChange:x.handleChange,formControls:x.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"renavam",onChange:x.handleChange,formControls:x.formControls}))),r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col-sm"},r.a.createElement(T,{name:"holder",onChange:x.handleChange,formControls:x.formControls})))))))):r.a.createElement("div",{className:"row align-items-center justify-content-center"},r.a.createElement("div",{className:"col align-self-center text-center"},r.a.createElement("i",{className:"fas fa-car"}),r.a.createElement("p",{className:"h5"},"N\xe3o h\xe1 Ve\xedculos",r.a.createElement("br",null),"cadastrados ainda"),r.a.createElement("button",{onClick:function(){w(),u(0),x.reloadFormValues(a.vehicles[0])},className:"btn btn-success btn-sm"},"Novo\xa0",r.a.createElement("i",{className:"fas fa-plus"})))):r.a.createElement(M,null)}function ae(e){var a=e.match,t=e.history,l=Object(n.useState)(!1),c=Object(b.a)(l,2),o=c[0],i=c[1],u=Object(n.useState)({}),m=Object(b.a)(u,2),p=m[0],v=m[1];Object(n.useEffect)((function(){function e(){return(e=Object(h.a)(f.a.mark((function e(){var t;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if("novo"!==(t=a.params.id)){e.next=5;break}return v({_id:"novo",vehicles:[]}),i(!0),e.abrupt("return");case 5:return e.next=7,E(t);case 7:i(!0);case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}!function(){e.apply(this,arguments)}()}),[a.params]);var E=function(){var e=Object(h.a)(f.a.mark((function e(a){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,P.getCustomerByID(a);case 3:(n=e.sent).vehicles&&(n.vehicles=n.vehicles.map((function(e){return Object(d.a)(Object(d.a)({},e),{},{_isValid:!0,_key:C()()})}))),v(n),e.next=11;break;case 8:e.prev=8,e.t0=e.catch(0),t.push("/n\xe3o encontrado");case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(a){return e.apply(this,arguments)}}();function g(){return N.apply(this,arguments)}function N(){return(N=Object(h.a)(f.a.mark((function e(){var n;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,p.vehicles&&p.vehicles.forEach((function(e){if(!0!==e._isValid)throw new Error("O ve\xedculo ".concat(e.license_plate?e.license_plate:""," est\xe1 inv\xe1lido"))})),"novo"===a.params.id&&(p._id=""),e.next=6,P.saveCustomer(p);case 6:if(n=e.sent,!p.vehicles){e.next=11;break}return e.next=10,Promise.all(p.vehicles.map(function(){var e=Object(h.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.owner=n._id,e.next=3,P.saveVehicle(a);case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(a){return e.apply(this,arguments)}}()));case 10:n.vehicles=e.sent;case 11:v(n),t.replace({pathname:"/cliente/".concat(n._id)}),s.b.success("Cliente ".concat(n._id," salvo com Sucesso!")),e.next=19;break;case 16:return e.prev=16,e.t0=e.catch(0),e.abrupt("return","error");case 19:case"end":return e.stop()}}),e,null,[[0,16]])})))).apply(this,arguments)}return o?r.a.createElement("div",{className:"container mt-3"},r.a.createElement("div",{className:"row"},r.a.createElement("div",{className:"col border-right p-2 pr-3"},r.a.createElement(X,{customer:p,setCustomer:v,doSubmit:g})),r.a.createElement("div",{className:"col-sm-5 p-2 pl-3 ".concat(p.vehicles.length<=0?"align-self-center":"")},r.a.createElement(ee,{customer:p,setCustomer:v,doSubmit:g})))):r.a.createElement(M,null)}function te(){return r.a.createElement(u.d,null,r.a.createElement(u.a,{from:"/cliente/:id/reload",to:"/cliente/:id"}),r.a.createElement(u.b,{path:"/cliente/:id",component:ae}),r.a.createElement(u.b,{path:"/lista/clientes",component:I}),r.a.createElement(u.b,{path:"/lista/veiculos",component:z}),r.a.createElement(u.b,{path:"/n\xe3o encontrado",component:m}),r.a.createElement(u.a,{from:"/",to:"/lista/veiculos"}),r.a.createElement(u.a,{to:"/n\xe3o encontrado"}))}var ne=function(){return r.a.createElement(o.a,null,r.a.createElement(i,null),r.a.createElement(s.a,null),r.a.createElement(te,null))};c.a.render(r.a.createElement(ne,null),document.getElementById("root"))}},[[46,1,2]]]);
//# sourceMappingURL=main.b5926d36.chunk.js.map